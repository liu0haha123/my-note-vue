(function(e){function t(t){for(var n,r,u=t[0],d=t[1],c=t[2],i=0,l=[];i<u.length;i++)r=u[i],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(e[n]=d[n]);h&&h(t);while(l.length)l.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,r=1;r<o.length;r++){var u=o[r];0!==a[u]&&(n=!1)}n&&(s.splice(t--,1),e=d(d.s=o[0]))}return e}var n={},r={app:0},a={app:0},s=[];function u(e){return d.p+"js/"+({}[e]||e)+"."+{"chunk-241b91ed":"4103e6d8","chunk-33405e9e":"f7b43efd","chunk-d37e6220":"e3b36d12","chunk-7d39eb6a":"aa1a512c","chunk-e356fa14":"4dfacb03"}[e]+".js"}function d(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,d),o.l=!0,o.exports}d.e=function(e){var t=[],o={"chunk-33405e9e":1,"chunk-d37e6220":1,"chunk-7d39eb6a":1,"chunk-e356fa14":1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=new Promise((function(t,o){for(var n="css/"+({}[e]||e)+"."+{"chunk-241b91ed":"31d6cfe0","chunk-33405e9e":"c4316b08","chunk-d37e6220":"0de94560","chunk-7d39eb6a":"312dc6b4","chunk-e356fa14":"92de8f4a"}[e]+".css",a=d.p+n,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var c=s[u],i=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(i===n||i===a))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){c=l[u],i=c.getAttribute("data-href");if(i===n||i===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete r[e],h.parentNode.removeChild(h),o(s)},h.href=a;var b=document.getElementsByTagName("head")[0];b.appendChild(h)})).then((function(){r[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,o){n=a[e]=[t,o]}));t.push(n[2]=s);var c,i=document.createElement("script");i.charset="utf-8",i.timeout=120,d.nc&&i.setAttribute("nonce",d.nc),i.src=u(e);var l=new Error;c=function(t){i.onerror=i.onload=null,clearTimeout(h);var o=a[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,o[1](l)}a[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:i})}),12e4);i.onerror=i.onload=c,document.head.appendChild(i)}return Promise.all(t)},d.m=e,d.c=n,d.d=function(e,t,o){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(d.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)d.d(o,n,function(t){return e[t]}.bind(null,n));return o},d.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="/my-note-vue/",d.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var h=i;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"135c":function(e,t,o){"use strict";var n=o("2b7c"),r=o("2a68");const a={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"};t["a"]={getAll(){return new Promise((e,t)=>{Object(n["a"])(a.GET).then(t=>{t.data=t.data.sort((e,t)=>e.At<t.createdAt?1:-1),t.data.forEach(e=>{e.createdAtFriendly=Object(r["a"])(e.createdAt),e.updatedAtFriendly=Object(r["a"])(e.updatedAt)}),e(t)}).catch(e=>{t(e)})})},updateNotebook(e,{title:t=""}={title:""}){return Object(n["a"])(a.UPDATE.replace(":id",e),"PATCH",{title:t})},deleteNotebook(e){return Object(n["a"])(a.DELETE.replace(":id",e),"DELETE")},addNotebook({title:e=""}={title:""}){return new Promise((t,o)=>{Object(n["a"])(a.ADD,"POST",{title:e}).then(e=>{e.data.createdAtFriendly=Object(r["a"])(e.data.createdAt),e.data.updatedAtFriendly=Object(r["a"])(e.data.updatedAt),t(e)}).catch(e=>{o(e)})})}}},"232b":function(e,t,o){},"2a68":function(e,t,o){"use strict";function n(e){let t="object"===typeof e?e:new Date(e),o=t.getTime(),n=Date.now(),r=n-o,a="";switch(!0){case r<6e4:a="刚刚";break;case r<36e5:a=Math.floor(r/6e4)+"分钟前";break;case r<864e5:a=Math.floor(r/36e5)+"小时前";break;default:a=Math.floor(r/864e5)+"天前"}return a}o.d(t,"a",(function(){return n}))},"2b7c":function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var n=o("bc3a"),r=o.n(n),a=o("5c96");function s(e,t="GET",o={}){return new Promise((n,s)=>{let u={url:e,method:t,ValidateStatus:function(e){return e>=200&&e<300||400===e}};"get"===t.toLowerCase()?u.params=o:u.data=o,r()(u).then(e=>{200===e.status?n(e.data):(a["Message"].error(e.data.msg),s(e.data))}).catch(e=>{a["Message"].error(e.response.data.msg),s({msg:e.response.data.msg})})})}r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",r.a.defaults.baseURL="https://note-server.hunger-valley.com",r.a.defaults.withCredentials=!0},"36c0":function(e,t,o){"use strict";o("6306")},"39f9":function(e,t,o){"use strict";o("885b")},"49c2":function(e,t,o){"use strict";var n=o("2b7c");const r={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"};t["a"]={register({username:e,password:t}){return Object(n["a"])(r.REGISTER,"POST",{username:e,password:t})},login({username:e,password:t}){return Object(n["a"])(r.LOGIN,"POST",{username:e,password:t})},logout(){return Object(n["a"])(r.LOGOUT)},getInfo(){return Object(n["a"])(r.GET_INFO)}}},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("2b0e"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("sidebar"),t("router-view")],1)},a=[],s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"sidebar"}},[t("avatar"),t("div",{staticClass:"icons"},[t("router-link",{attrs:{to:"/note",title:"笔记"}},[t("i",{staticClass:"iconfont icon-note"})]),t("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[t("i",{staticClass:"iconfont icon-notebook"})]),t("router-link",{attrs:{to:"/trash",title:"回收站"}},[t("i",{staticClass:"iconfont icon-trash"})])],1),t("div",{staticClass:"logout",on:{click:e.onLogout}},[t("i",{staticClass:"iconfont icon-logout"})])],1)},u=[],d=function(){var e=this,t=e._self._c;return t("span",{attrs:{title:e.username}},[e._v(e._s(e.slug))])},c=[],i=o("2f62"),l={data(){return{}},methods:{...Object(i["b"])({setUser:"checkLogin"})},created(){this.setUser()},computed:{...Object(i["c"])(["slug","username"]),slug(){return this.username[0]}}},h=l,b=(o("84f4"),o("2877")),f=Object(b["a"])(h,d,c,!1,null,"0fc57856",null),p=f.exports,m={methods:{...Object(i["b"])(["logout"]),onLogout(){this.logout()}},components:{Avatar:p}},k=m,g=(o("36c0"),Object(b["a"])(k,s,u,!1,null,"08e905d4",null)),N=g.exports,I={name:"app",components:{sidebar:N}},v=I,T=(o("39f9"),Object(b["a"])(v,r,a,!1,null,null,null)),E=T.exports,O=o("5c96"),A=o.n(O),y=(o("0fae"),o("8c4f"));n["default"].use(y["a"]);const j=[{path:"/",alias:"/notebooks",component:()=>o.e("chunk-7d39eb6a").then(o.bind(null,"0028"))},{path:"/login",component:()=>o.e("chunk-e356fa14").then(o.bind(null,"578a"))},{path:"/note",component:()=>Promise.all([o.e("chunk-241b91ed"),o.e("chunk-33405e9e")]).then(o.bind(null,"128e"))},{path:"/trash",component:()=>Promise.all([o.e("chunk-241b91ed"),o.e("chunk-d37e6220")]).then(o.bind(null,"72b0"))}],w=new y["a"]({routes:j});var P=w,D=o("135c");const L={state:{notebooks:null,curBookId:null},getters:{notebooks:e=>e.notebooks||[],curBook:e=>Array.isArray(e.notebooks)?e.curBookId?e.notebooks.find(t=>t.id==e.curBookId)||{}:e.notebooks[0]||{}:{}},mutations:{setNotebooks(e,t){e.notebooks=t.notebooks},addNotebook(e,t){e.notebooks.unshift(t.notebook)},updateNotebook(e,t){let o=e.notebooks.find(e=>e.id==t.notebookId)||{};o.title=t.title},deleteNotebook(e,t){e.notebooks=e.notebooks.filter(e=>e.id!=t.notebookId)},setCurBook(e,t){e.curBookId=t.curBookId}},actions:{getNotebooks({commit:e,state:t}){return null!==t.notebooks?Promise.resolve():D["a"].getAll().then(t=>{e("setNotebooks",{notebooks:t.data})})},addNotebook({commit:e},t){return D["a"].addNotebook({title:t.title}).then(t=>{e("addNotebook",{notebook:t.data}),O["Message"].success(t.msg)})},updateNotebook({commit:e},t){return D["a"].updateNotebook(t.notebookId,{title:t.title}).then(o=>{e("updateNotebook",{notebookId:t.notebookId,title:t.title}),O["Message"].success(o.msg)})},deleteNotebook({commit:e},t){return D["a"].deleteNotebook(t.notebookId).then(o=>{e("deleteNotebook",{notebookId:t.notebookId}),O["Message"].success(o.msg)})}}};var C=L,_=o("2b7c"),S=o("2a68");const G={GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"};var M={getAll({notebookId:e}){return new Promise((t,o)=>{Object(_["a"])(G.GET.replace(":notebookId",e)).then(e=>{e.data=e.data.map(e=>(e.createdAtFriendly=Object(S["a"])(e.createdAt),e.updatedAtFriendly=Object(S["a"])(e.updatedAt),e)).sort((e,t)=>e.updatedAt<t.updatedAt?1:-1),t(e)}).catch(e=>{o(e)})})},updateNote({noteId:e},{title:t,content:o}){return Object(_["a"])(G.UPDATE.replace(":noteId",e),"PATCH",{title:t,content:o})},deleteNote({noteId:e}){return Object(_["a"])(G.DELETE.replace(":noteId",e),"DELETE")},addNote({notebookId:e},{title:t="",content:o=""}={title:"",content:""}){return new Promise((n,r)=>{Object(_["a"])(G.ADD.replace(":notebookId",e),"POST",{title:t,content:o}).then(e=>{e.data.createdAtFriendly=Object(S["a"])(e.data.createdAt),e.data.updatedAtFriendly=Object(S["a"])(e.data.updatedAt),n(e)}).catch(e=>{r(e)})})}};const U={state:{notes:null,curNoteId:null},getters:{notes:e=>e.notes,curNote:e=>Array.isArray(e.notes)?e.curNoteId?e.notes.find(t=>t.id==e.curNoteId)||{title:"",content:""}:e.notes[0]||{title:"",content:""}:{title:"",content:""}},mutations:{setNote(e,t){e.notes=t.notes},addNote(e,t){e.notes.unshift(t.note)},updateNote(e,t){let o=e.notes.find(e=>e.id==t.noteId)||{};o.title=t.title,o.content=t.content},deleteNote(e,t){e.notes=e.notes.filter(e=>e.id!=t.noteId)},setCurNote(e,t={}){e.curNoteId=t.curNoteId}},actions:{getNotes({commit:e},{notebookId:t}){return M.getAll({notebookId:t}).then(t=>{e("setNote",{notes:t.data})})},addNote({commit:e},{notebookId:t,title:o,content:n}){return M.addNote({notebookId:t},{title:o,content:n}).then(t=>{e("addNote",{note:t.data})})},updateNote({commit:e},{noteId:t,title:o,content:n}){return M.updateNote({noteId:t},{title:o,content:n}).then(r=>{e("updateNote",{noteId:t,title:o,content:n})})},deleteNote({commit:e},{noteId:t}){return M.deleteNote({noteId:t}).then(o=>{e("deleteNote",{noteId:t}),O["Message"].success(o.msg)})}}};var F=U,x=o("49c2");const B={state:{user:null},getters:{username:e=>null===e.user?"未登录":e.user.username,slug:e=>null===e.user?"未":e.user.username[0]},mutations:{setUser(e,t){e.user=t.user}},actions:{login({commit:e},{username:t,password:o}){return x["a"].login({username:t,password:o}).then(t=>{e("setUser",{user:t.data})})},register({commit:e},{username:t,password:o}){return x["a"].register({username:t,password:o}).then(t=>{e("setUser",{user:t.data})})},logout({commit:e}){return x["a"].logout().then(t=>{e("setUser",{user:null}),P.push({path:"/login"})})},checkLogin({commit:e,state:t},o){return null!==t.user?Promise.resolve():x["a"].getInfo().then(t=>{t.isLogin?e("setUser",{user:t.data}):P.push(o)})}}};var R=B;const H={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"};var V={getAll(){return new Promise((e,t)=>{Object(_["a"])(H.GET).then(t=>{t.data=t.data.map(e=>(e.createdAtFriendly=Object(S["a"])(e.createdAt),e.updatedAtFriendly=Object(S["a"])(e.updatedAt),e)).sort((e,t)=>e.updatedAt<t.updatedAt?1:-1),e(t)}).catch(e=>{t(e)})})},revertNote({noteId:e}){return Object(_["a"])(H.REVERT.replace(":noteId",e),"PATCH")},deleteNote({noteId:e}){return Object(_["a"])(H.DELETE.replace(":noteId",e),"DELETE")}};const q={state:{trashNotes:null,curTrashNoteId:null},getters:{trashNotes:e=>e.trashNotes||[],curTrashNote:(e,t)=>e.curTrashNoteId?e.trashNotes.find(t=>t.id==e.curTrashNoteId)||{}:t.trashNotes[0]||{},belongTo:(e,t,o,n)=>{let r=n.notebooks.find(e=>e.id==t.curTrashNote.notebookId)||{};return r.title||""}},mutations:{setTrashNotes(e,t={}){e.trashNotes=t.trashNotes},addTrashNote(e,t){e.trashNotes.unshift(t.note)},deleteTrashNote(e,t){e.trashNotes=e.trashNotes.filter(e=>e.id!=t.noteId)},setCurTrashNote(e,t={}){e.curTrashNoteId=t.curTrashNoteId}},actions:{getTrashNotes({commit:e}){return V.getAll().then(t=>{e("setTrashNotes",{trashNotes:t.data})})},deleteTrashNote({commit:e},{noteId:t}){return V.deleteNote({noteId:t}).then(o=>{e("deleteTrashNote",{noteId:t}),O["Message"].success(o.msg)})},revertTrashNote({commit:e},{noteId:t}){return V.revertNote({noteId:t}).then(o=>{e("deleteTrashNote",{noteId:t}),O["Message"].success(o.msg)})}}};var J=q;n["default"].use(i["a"]);var K=new i["a"].Store({modules:{notebooks:C,note:F,user:R,trash:J}});n["default"].config.productionTip=!1,n["default"].use(A.a),new n["default"]({router:P,store:K,render:e=>e(E)}).$mount("#app")},6306:function(e,t,o){},"84f4":function(e,t,o){"use strict";o("232b")},"885b":function(e,t,o){}});
//# sourceMappingURL=app.597fb374.js.map